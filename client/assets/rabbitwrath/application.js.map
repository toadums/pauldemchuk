{"version":3,"file":"public/application.js","sources":["client/application.coffee","client/coffee/character.coffee","client/coffee/collections.coffee","client/coffee/data/dialogs.coffee","client/coffee/data/items.coffee","client/coffee/data/manifest.coffee","client/coffee/data/npcs.coffee","client/coffee/data/quests.coffee","client/coffee/dialog.coffee","client/coffee/game.coffee","client/coffee/home.coffee","client/coffee/input.coffee","client/coffee/instructions.coffee","client/coffee/intro.coffee","client/coffee/inventory.coffee","client/coffee/level.coffee","client/coffee/map.coffee","client/coffee/models/quest.coffee","client/coffee/models/questpart.coffee","client/coffee/monster.coffee","client/coffee/npc.coffee","client/coffee/player.coffee","client/coffee/system/sprites.coffee","client/coffee/utils.coffee","client/coffee/win.coffee"],"names":[],"mappings":"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","sourcesContent":["Game = require 'coffee/game'\n\n# The application object.\nmodule.exports = class Application\n  @init: ->\n\n    height = window.innerHeight\n    width = window.innerWidth\n\n    canvas = document.getElementById(\"gameCanvas\")\n    canvas = canvas.getContext \"2d\"\n\n    canvas.canvas.height = Math.floor(height / 96)*96\n    canvas.canvas.width =  Math.floor(width / 96)*96\n\n    console.log \"Initializing!\"\n    game = new Game()\n","module.exports = class Character\n  constructor: (sprite) ->\n\n    @playerBody = sprite\n  init: (pos) =>\n    @addChild @playerBody\n\n    @x = pos.x\n    @y = pos.y\n\n    # Width of the sprite\n    @width = @playerBody.spriteSheet._frameWidth\n    @height = @playerBody.spriteSheet._frameHeight\n\n  collide: (them, vel) ->\n    top = @y + @height/2\n    left = @x\n    right = @x + @width\n    bottom = @y + @height\n\n    collision =\n      whore: false\n      green: false\n\n    r = them.right - left\n    l = them.left - right\n    t = them.top - bottom\n    b = them.bottom - top\n\n    themCenter =\n      x: them.left + (them.right-them.left) / 2\n      y: them.top + (them.bottom-them.top) / 2\n\n    meCenter =\n      x: left + (@width/2)\n      y: bottom - (@height/4)\n\n    v =\n      x: themCenter.x - meCenter.x\n      y: themCenter.y - meCenter.y\n\n\n    # Instead of doing a huge calculation of corners, just do a preliminary check to see if we are within the MAX distance we could be from eachother\n    if Math.sqrt(v.x*v.x + v.y*v.y) <= @diagonalHeight + them.diagonalHeight\n\n      # Horizontal collision detection. If the object ISNT to my top or bottom (its to my side), check to see if I collide\n      if not (them.top <= top and them.bottom - @MAX_VELOCITY <= top) and not (them.bottom >= bottom and them.top + @MAX_VELOCITY >= bottom)\n        # Check to make sure the object is on the correct side to me (ie. the side that my velocity is pointing at. This is the part before the 'and')\n        # To see if I collide, make a vector from my left, to their right; and another from my right to their left. If either of these vectors go the opposite direction\n        # from my velocity.x, then I know that my edge is INSIDE them, and I am trying to continue that direction...collide.\n        if v.x * vel.x > 0 and (r * vel.x < 0 or l * vel.x < 0)\n          collision.whore = true\n\n      # Vertical collision detection. Same shit, different direction\n      if not (them.left <= left and them.right - @MAX_VELOCITY <= left) and not (them.right >= right and them.left + @MAX_VELOCITY >= right)\n        if v.y * vel.y > 0 and (t * vel.y < 0 or b * vel.y < 0)\n          collision.green = true\n\n\n    collision\n\n  checkCollisions: (child) =>\n    if child instanceof createjs.Container and child.visible\n      for subchild in child.children\n        dir = @checkCollision subchild\n        if dir.whore or dir.green\n          return dir\n    else\n      return @checkCollision child\n    return {}\n","Quest = require 'coffee/models/quest'\n_dialogs = require 'coffee/data/dialogs'\n_quests = require 'coffee/data/quests'\n_items = require 'coffee/data/items'\n\nquests = (new Quest(quest) for quest in _quests)\n\ndialogs = (dialog for dialog in _dialogs)\n\nmodule.exports =\n\n  reset: ->\n    quests = (new Quest(quest) for quest in _quests)\n\n    dialogs = (dialog for dialog in _dialogs)\n\n  findModel: (id) ->\n\n    _.find dialogs.concat(quests).concat(_items), (d) -> d.id is id\n","module.exports = [\n\n  # COUNTER FOR BUNNY KILL!!!! This could be in quest log\n\n\n  # The hole\n  {\n    id: 170\n    text: \"A hole...\"\n    actions: [\n      {\n        type: \"done\"\n        text: \"I shouldn't\"\n      }\n      {\n        type: \"warp\"\n        text: \"YEAH I SHOULD\"\n      }\n    ]\n  }\n\n  # Building Signs\n  {\n    id: 190\n    text: \"Student Union Building.\"\n    actions: [\n      {\n        type: 'done'\n        text: 'Cool'\n      }\n    ]\n  }\n\n  {\n    id: 191\n    text: \"Clearihue - English and Klingon\"\n    actions: [\n      {\n        type: 'done'\n        text: 'Cool'\n      }\n    ]\n  }\n\n  {\n    id: 192\n    text: \"Cornett - So confusing it was turned into a literal maze. D:\"\n    actions: [\n      {\n        type: 'done'\n        text: 'I bet there is something useful in here...'\n      }\n    ]\n  }\n\n  {\n    id: 193\n    text: \"SSM - Math and Quantum Computing\"\n    actions: [\n      {\n        type: 'done'\n        text: 'Cool'\n      }\n    ]\n  }\n\n  {\n    id: 194\n    text: \"Elliot - Used to be physics, now its a prison\"\n    actions: [\n      {\n        type: 'done'\n        text: 'Cool'\n      }\n    ]\n  }\n\n  # Initial quest, get sword\n  {\n    id: 150\n    text: \"What? Another Human??? If you want to survive the rabbit invasion go to SSM.\"\n    actions: [\n      {\n        type: 'queststart'\n        text: 'What the hell..'\n        value: {quest: 901}\n      }\n    ]\n  }\n\n  {\n    id: 151\n    text: \"No new messages D:\"\n    actions: [\n      {\n        type: 'done'\n        text: '...'\n      }\n    ]\n  }\n\n  {\n    id: 152\n    text: \"I wonder if there is anything useful in this old barrel\"\n    actions: [\n      {\n        type: 'goto'\n        text: 'Investigate'\n        value: 153\n      }\n      {\n        type: 'done'\n        text: 'Leave it'\n      }\n    ]\n  }\n\n  {\n    id: 153\n    text: \"You find a sword!\"\n    actions: [\n      {\n        type: \"questpart\"\n        text: \"Those bunnies don't stand a chance.\"\n        value: {quest: 901, part: 850}\n      }\n    ]\n  }\n\n\n\n\n\n\n\n  ## Dialogs for when you meet the old guy, and do the first part of main quest\n  {\n    id: 161\n    text: \"Pssst ...\"\n    actions: [\n      {\n        type: \"goto\"\n        text: \"What the...\"\n        value: 162\n      }\n      {\n        type: \"done\"\n        text: \"Leave.\"\n      }\n    ]\n  }\n\n  {\n    id: 162\n    text: \"Thank god you're here. My hip is out, I need your help!\"\n    actions: [\n      {\n        type: \"goto\"\n        text: \"What can I do?\"\n        value: 163\n      }\n      {\n        type: \"gameover\"\n        text: \"Kill the old man\"\n        value: \"The old man was your only hope...\"\n      }\n    ]\n  }\n\n  {\n    id: 163\n    text: \"Oh, I see you found Turpin, the bunny killer. Instead you should look for the bunny remote.\"\n    actions: [\n      {\n        type: \"goto\"\n        text: \"What is the bunny remote?\"\n        value: 164\n      }\n      {\n        type: \"done\"\n        text: \"Nah, i <3 bloodshed\"\n      }\n    ]\n  }\n\n  {\n    id: 164\n    text: \"Its a device to disconnect the bunnies from Dr. Antagonists control.\"\n    actions: [\n      {\n        type: \"goto\"\n        text: \"Where do I look\"\n        value: 165\n      }\n    ]\n  }\n\n  {\n    id: 165\n    text: \"Ive hidden pieces around campus so Dr. Antaggy doesnt find it. First, get the deactivator. Its near building 451.\"\n    actions: [\n      {\n        type: \"queststart\"\n        text: \"Word.\"\n        value: {quest: 911}\n      }\n    ]\n  }\n\n\n\n  # THE LIBRARRRRRY of alexandria\n  {\n    id: 171\n    text: \"Library Closed. Analog books no longer exist.\"\n    actions: [\n      {\n        type: \"done\"\n        text: \"Hmm...What an interesting critique of the future.\"\n      }\n    ]\n  }\n\n  {\n    id: 172\n    text: \"The deactivator is hidden behind some grass below this note. It will serve you well. But, if you really want to defeat the bunnies, you must deactivate them all at once. \"\n    actions: [\n      {\n        type: \"goto\"\n        text: \"Hmm....\"\n        value: 173\n      }\n    ]\n  }\n\n  {\n    id: 173\n    text: \"To do so, you will need carrots as bait. Also, a trap and the signal amplifier. Go back to the old man after you get everything.\"\n    actions: [\n      {\n        type: 'questpart'\n        text: \"Time to erabbicate these bastards.\"\n        value: {quest: 911, part: 861}\n      }\n    ]\n  }\n\n  {\n    id: 174\n    text: \"Oh, I see you found my note. Did you collect all of the items?\"\n    actions: [\n      {\n        type: 'questpart'\n        text: \"Yep!\"\n        value: {quest: 911, part: 862, fail: 176, success: 177}\n      }\n      {\n        type: 'goto'\n        text: \"What were they again?\"\n        value: 175\n      }\n\n    ]\n  }\n\n  {\n    id: 176\n    text: \"You're just a hare shy of having all the items.\"\n    actions: [\n      {\n        type: 'done'\n        text: '*cringe*'\n      }\n    ]\n  }\n\n  {\n    id: 175\n    text: \"The bunny remote, the signal amplier, the trap, and some carrots\"\n    actions: [\n      {\n        type: 'done'\n        text: \"Oh, right. Brb\"\n      }\n    ]\n  }\n\n  {\n    id: 177\n    text: \"Dude, you rock! Here is the Bunny Deactivator. If you don't know what to do, check your inventory (hit I)\"\n    actions: [\n      {\n        type: 'done'\n        text: \"Yay\"\n      }\n    ]\n  }\n\n  {\n    id: 178\n    text: \"GMO'd Carrots. If you eat them you will most likely die\"\n    actions: [\n      {\n        type: 'done'\n        text: \"These might come in handy\"\n      }\n      {\n        type: 'gameover'\n        text: \"#yolo\"\n        value: \"lol\"\n      }\n\n    ]\n  }\n\n\n]\n","module.exports = [\n  {\n\n    id: 301\n    name: \"Default\"\n    description: \"This is just a development placeholder. Delete it !!! \"\n\n  }\n  {\n\n    id: 302\n    name: \"Default2\"\n    description: \"This is just aNOTHER development placeholder. Delete it !!! \"\n\n  }\n  {\n\n    id: 300\n    name: \"Sword\"\n    description: \"A sword named Turpin, the Bunny Slayer. Nobody is sure of the origin of this name..\"\n\n  }\n  {\n    id: 351\n    name: \"Bunny Remote\"\n    type: \"remote\"\n    description: \"Not sure how to turn this thing on....Maybe I should find a power source\"\n  }\n  {\n    id: 352\n    type: 'carrot'\n    name: \"GMO Carrots\"\n    description: \"I feel stronger just holding these carrots\"\n  }\n  {\n    id: 353\n    type: 'amplifier'\n    name: 'Signal Amplifier'\n    description: \"Broadcast signals twice as far with this amplifier. Lifetime Guarentee!\"\n  }\n  {\n    id: 354\n    type: 'trap'\n    name: 'Trap'\n    description: \"A pretty un-futuristic trap.\"\n  }\n  {\n    id: 666\n    type: \"deactivator\"\n    name: \"Bunny Deactivator\"\n    description: \"Deactivate all the bunnies at once. Press B to use\"\n  }\n\n]\n","module.exports = [\n  {\n    src: \"images/runningRpg.png\"\n    id: \"player\"\n  },\n  {\n    src: \"images/bunny1.png\"\n    id: \"monster\"\n  },\n  {\n    src: \"images/bunny2.png\"\n    id: \"monster2\"\n  },\n  {\n    src: \"images/bunny3.png\"\n    id: \"monster3\"\n  },\n  {\n    src: \"images/bunny4.png\"\n    id: \"monster4\"\n  },\n  {\n    src: \"images/bunny5.png\"\n    id: \"monster5\"\n  },\n  {\n    src: \"images/bunny1red.png\"\n    id: \"monsterred\"\n  },\n  {\n    src: \"images/bunny2red.png\"\n    id: \"monster2red\"\n  },\n  {\n    src: \"images/bunny3red.png\"\n    id: \"monster3red\"\n  },\n  {\n    src: \"images/bunny4red.png\"\n    id: \"monster4red\"\n  },\n  {\n    src: \"images/bunny5red.png\"\n    id: \"monster5red\"\n  },\n  {\n    src: \"images/blood.png\"\n    id: \"bloodPool\"\n  },\n  {\n    src: \"images/questBouncing.png\"\n    id: \"questGiver\"\n  }\n  {\n    src: \"images/exclamation.png\"\n    id: \"exclamation\"\n  }\n  {\n    src: \"images/question.png\"\n    id: \"question\"\n  }\n  {\n    src: \"images/arrow.png\"\n    id: \"arrow\"\n  }\n  {\n    src: \"images/sign.png\"\n    id: \"sign\"\n  }\n  {\n    src: \"images/barrel.png\"\n    id: \"barrel\"\n  }\n  {\n    src: \"images/blank.png\"\n    id: \"blank\"\n  }\n  {\n    src: \"images/trap.png\"\n    id: \"trap\"\n  }\n  {\n    src: \"images/noitem.png\"\n    id: \"noitem\"\n  }\n  {\n    src: \"images/amplifier.png\"\n    id: \"amplifier\"\n  }\n  {\n    src: \"images/carrot.png\"\n    id: \"carrot\"\n  }\n  {\n    src: \"images/remote.png\"\n    id: \"remote\"\n  }\n  {\n    src: \"images/note.png\"\n    id: \"note\"\n  }\n  {\n    src: \"images/deactivator.png\"\n    id: \"deactivator\"\n  }\n  {\n    src: \"images/player2.png\"\n    id: \"player2\"\n  }\n  {\n    src: \"images/music.mp3\"\n    id: \"music\"\n  }\n  {\n    src: \"images/sword.mp3\"\n    id: \"sword\"\n  }\n  {\n    src: \"images/punch.mp3\"\n    id: \"punch\"\n    data: 1\n  }\n  {\n    src: \"images/splat.mp3\"\n    id: \"splat\"\n  }\n]\n","module.exports = [\n  # {\n  #   dialogs: [\n  #     { type: 'questpart', quest: 900, part: 802, dialog: 128, state: 'return' }\n  #     { type: 'questpart', quest: 900, part: 801, dialog: 125 }\n  #     { type: 'queststart', quest: 900, dialog: 123, state: 'hasquest' }\n  #     { type: 'questdone', quest: 900, dialog: 129 }\n  #   ]\n  #   id: 2\n  #   pos:\n  #     x: 100\n  #     y: 1500\n  # }\n  #\n  # {\n  #   dialogs:\n  #     [\n  #       { type: 'questpart', quest: 900, part: 801, dialog: 127, state: 'return' }\n  #       { type: 'else', dialog: 130 }\n  #     ]\n  #   id: 3\n  #   pos:\n  #     x: 1800\n  #     y: 100\n  # }\n\n\n  ## SUB sign\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 190}\n      ]\n    id: 90\n    pos:\n      x: 7896\n      y: 8860\n    sprite: \"signSprite\"\n  }\n\n  ## Clearihue sign\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 191}\n      ]\n    id: 91\n    pos:\n      x: 8016\n      y: 6650\n    sprite: \"signSprite\"\n  }\n\n  ## Cornett sign\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 192}\n      ]\n    id: 92\n    pos:\n      x: 8796\n      y: 4300\n    sprite: \"signSprite\"\n  }\n\n  ## SSM sign\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 193}\n      ]\n    id: 93\n    pos:\n      x: 8646\n      y: 1596\n    sprite: \"signSprite\"\n  }\n\n  ## Elliot sign\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 194}\n      ]\n    id: 94\n    pos:\n      x: 1756\n      y: 5600\n    sprite: \"signSprite\"\n  }\n\n\n  ## Message left by old man. Prompt us to start quest\n  {\n    dialogs:\n      [\n        {type: 'queststart', quest: 901, dialog: 150, state: 'hasquest'}\n        {type: 'else', quest: 901, dialog: 151}\n      ]\n    id: 4\n    pos:\n      x: 8666\n      y: 8600\n    sprite: \"signSprite\"\n  }\n\n  ## Barrel with the sword\n  {\n    dialogs:\n      [\n        {type: 'questpart', quest: 901, part: 850, dialog: 152, state: 'return'}\n      ]\n    id: 5\n    pos:\n      x: 5836\n      y: 220\n    sprite: \"barrelSprite\"\n  }\n\n\n\n  ## The hole\n  {\n    dialogs:\n      [\n        {type: 'queststart', quest: 911, dialog: 161, state: 'hasquest'}\n        {type: 'questpart', quest: 911, part: 862, dialog: 174, state: 'return'}\n      ]\n    id: 6\n    pos:\n      x: 4146\n      y: 3820\n    sprite: \"blank\"\n    size:\n      x: 2\n      y: 2\n\n  }\n\n  ## Note by 451\n  {\n    dialogs:\n      [\n        {type: 'questpart', quest: 911, part: 861, dialog: 172, state: 'return'}\n      ]\n    id: 8\n    pos:\n      x: 3200\n      y: 9000\n    sprite: \"noteSprite\"\n  }\n\n  ## Sign to pick carrots\n  {\n    dialogs:\n      [\n        {type: 'else', dialog: 178}\n      ]\n    id: 9\n    pos:\n      x: 7180\n      y: 2930\n    sprite: \"noteSprite\"\n  }\n\n\n  {\n    dialogs:\n      [\n        {type: 'easteregg', dialog: 171}\n      ]\n    id: 7\n    pos:\n      x: 4946\n      y: 8600\n    sprite: \"signSprite\"\n  }\n\n]\n","## Quest's onComplete can have type item, quest, ??.\n##  If it is 'item', the player gets that item when the quest completes.\n##  If it is 'quest', the player has access to start a new quest (#TODO. Might not make the game)\n\nmodule.exports = [\n  {\n    name: \"First Quest\"\n    pos: 0\n    id: 900\n    npc: 2\n    ordered: true\n    markers: [\n      { pos: 0, id: 801, description: \"Talk to Donkey\", npc: 3}\n      { pos: 1, id: 802, description: \"Get banana from Diddy\", npc: 2}\n    ]\n    onComplete: {\n      type: \"item\"\n      id: 300\n    }\n  }\n\n  {\n    name: \"message left by man quest\"\n    pos: 0\n    id: 901\n    npc: 4\n    ordered: true\n    markers: [\n      { pos: 0, id: 850, description: \"GO to SSM\", npc: 5}\n    ]\n    onComplete: {\n      type: \"item\"\n      id: 300\n    }\n  }\n\n  {\n    name: \"Main quest to get the bunny killing device\"\n    pos: 0\n    id: 911\n    npc: 6\n    ordered: true\n    markers: [\n      { pos: 0, id: 861, description: \"Get the remote\", npc: 8 }\n      { pos: 1, id: 862, description: \"Check if have all supplies\", npc: 6, cond: {type: \"inventory\", items: [351, 352, 353, 354]} }\n    ]\n    onComplete: {\n      type: \"cb\"\n      name: \"finishMain\"\n    }\n  }\n\n]\n","Collections = require 'coffee/collections'\n{ wrap } = require 'coffee/utils'\n\nclass DialogManager\n  constructor: (@delegate) ->\n    {\n      @canvas\n      @stage\n      @endAction\n      @setQuest\n      @gameover\n    } = @delegate\n\n    @currentDialog = null\n    @dialog = null\n    @lines = []\n    @margin = 40\n    @padding = 40\n    @w = @stage.canvas.width - @margin*2\n    @h = 160\n\n  # Draw the box that holds the dialog\n  createBox: (pos) ->\n    @box = new createjs.Shape()\n    @box.graphics.beginStroke(\"rgb(230,230,230)\")\n    @box.graphics.beginFill(\"black\")\n    @box.graphics.setStrokeStyle(2)\n    @box.snapToPixel = true\n    @box.graphics.drawRect(pos.x, pos.y, @w, @h)\n    @stage.addChild @box\n\n  # Render the text inside the dialog\n  createText: (pos, dialog) =>\n    lines = wrap(@canvas.getContext('2d'), dialog.text, @w - @padding*2, \"26px VT323\")\n    i = 0\n\n    for line in lines\n      text = new createjs.Text(line, \"26px VT323\", \"rgb(0,255,0)\")\n      text.x = pos.x + @padding\n      text.y = pos.y + i * 30 + @padding\n      text.snapToPixel = true\n      text.textBaseline = \"alphabetic\"\n      @stage.addChild text\n      @lines.push text\n      i++\n\n  showDialog: (id) =>\n    dialog = Collections.findModel id\n\n    # Position relative to the viewport\n    pos =\n      x: @stage.x*-1 + @margin\n      y: @stage.y*-1 + @stage.canvas.height - @h - @margin\n\n    @createBox pos\n    @createText pos, dialog\n\n    @dialog = new Controls dialog, pos, @\n\n\n  close: =>\n    @stage.removeChild text for text in @lines\n    @lines = []\n    @stage.removeChild @box\n    @currentDialog = null\n    @dialog = null\n\n  # Handle key events in the dialogs\n  keyPress: (key) =>\n    switch key\n      when \"left\", \"right\"\n        @dialog.changeSelection key\n      when \"enter\"\n        @dialog.enterPress()\n      when \"esc\"\n        @dialog.close()\n        @endAction()\n\n# Simple dialog with yes/no buttons\nclass Controls\n  constructor: (@dialog, pos, @delegate) ->\n    {\n      close: @delegateClose\n      @stage\n      @showDialog\n      @endAction\n      @padding\n      @h\n      @setQuest\n      @gameover\n    } = @delegate\n\n    @active = 0\n\n    @buttons = []\n    i = 0\n\n    # Add the buttons\n    for action in dialog.actions\n      button = new createjs.Text(action.text, \"26px VT323\", if i is 0 then \"white\" else \"rgb(0,255,0)\")\n      button.x = pos.x + @padding + i * 300\n      button.y = pos.y + @h - @padding\n      button.textBaseline = \"alphabetic\"\n\n      button.addEventListener \"click\", _.partial @handleNext, action, _\n      @buttons.push button\n      @stage.addChild button\n      i++\n\n  # Change which button is active\n  changeSelection: (direction) ->\n    if direction is \"right\" and @active < @buttons.length - 1\n      @buttons[@active].color = \"rgb(0,255,0)\"\n      @active++\n    else if direction is \"left\" and @active > 0\n      @buttons[@active].color = \"rgb(0,255,0)\"\n      @active--\n\n    @buttons[@active].color = \"white\"\n\n  # Enter was pressed. Handle the action for the active button\n  enterPress: =>\n    @buttons[@active].dispatchEvent('click')\n\n  # Close the dialog when a yes/no button is hit\n  handleNext: (action, data, ev) =>\n    if action.type is 'goto'\n      next = action.value\n\n      @close()\n      if not next\n        @endAction()\n        return\n\n      @showDialog next\n\n    else if action.type is 'gameover'\n      @close()\n      @endAction()\n      @gameover(action.value or \"You lost..\")\n    # Start a quest!!\n    else if action.type is 'queststart'\n\n      if (quest = Collections.findModel action.value.quest)\n        quest.start()\n        @setQuest quest\n      @close()\n      @endAction()\n\n    # Complete a quest part\n    else if action.type is 'questpart'\n      if (quest = Collections.findModel action.value.quest)?\n        partComplete = quest.completePart action.value.part\n        next = if partComplete then action.value.success else action.value.fail\n        @close()\n\n        if not next\n          @endAction()\n        else\n          @showDialog next\n\n      else\n        @close()\n        @endAction()\n    else\n      @close()\n      @endAction()\n\n    ev.stopPropagation()\n\n  close: =>\n    @stage.removeChild button for button in @buttons\n    @buttons = []\n    @delegateClose()\n\n\n\nmodule.exports =\n  DialogManager: DialogManager\n","Intro = require('coffee/intro')\nKeyInput = require('coffee/input')\nPlayer   = require('coffee/player')\nMonster   = require('coffee/monster')\nLevel   = require('coffee/level')\nNPC   = require('coffee/npc')\n{DialogManager} = require('coffee/dialog')\nInventory = require('coffee/inventory')\n_npcs = require 'coffee/data/npcs'\nManifest = require 'coffee/data/manifest'\nSprites = require 'coffee/system/sprites'\nCollections = require 'coffee/collections'\nMap = require 'coffee/map'\nHome = require 'coffee/home'\nInstructions = require 'coffee/instructions'\nWin = require 'coffee/win'\n\nmodule.exports = class Game\n  constructor: () ->\n    # If the player is in an action, they can't do anything\n    @IN_ACTION = false\n    @IN_INVENTORY = false\n    @MAP_OPEN = false\n    @INTRO = false\n    @HOME = true\n    @INSTR = false\n    @WIN = false\n\n    @GAME_OVER = false\n\n    @npcs = []\n    @monsters = []\n    @keyInput = new KeyInput\n    @init()\n\n    @currentQuest = null\n    @healthBar = null\n\n    @itemsInteractedWith = []\n    @charsInteractedWith = []\n    @monstersInteractedWith = []\n\n  clearModes: =>\n    @INTRO = false\n    @HOME = false\n    @INSTR = false\n    @GAME_OVER = false\n    @WIN = false\n\n  addLoadingText: () =>\n    @stage.x = 0\n    @stage.y = 0\n\n    loadingText = \"Loading...hold tight, this may take a hare\"\n\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"40px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(loadingText).width/2\n\n    @loadingText = new createjs.Text loadingText, \"40px Arial\", \"white\"\n    @loadingText.x = x\n    @loadingText.y = @stage.canvas.height/2 - 100\n    @loadingText.snapToPixel = true\n    @loadingText.textBaseline = \"alphabetic\"\n\n    @stage.addChild @loadingText\n    @stage.update()\n\n\n  init: () =>\n    @canvas = document.getElementById(\"gameCanvas\")\n    @canvas.onselectstart = () -> false\n    @stage = new createjs.Stage(@canvas)\n\n    @addLoadingText()\n\n    @img = document.createElement('img')\n    @img.src = '/images/map.png';\n\n\n    @dialogManager = new DialogManager @\n    @inventory = new Inventory @\n    @map = new Map @stage, @img\n    manifest = Manifest or []\n    @loader = new createjs.LoadQueue(false)\n    @loader.installPlugin createjs.Sound\n    @loader.addEventListener \"complete\", @handleComplete\n    @loader.loadManifest manifest\n\n    @intro = new Intro @\n    @home = new Home @\n    @instructions = new Instructions @\n    @win = new Win @\n\n    @stage.update() #update the stage to show text\n    @soundOn = true\n\n  handleClick: =>\n    @canvas.onclick = null\n\n  setQuest: (quest) =>\n    @currentQuest = quest\n\n  handleComplete: (event) =>\n\n    # Coffeescript sugar. Creates a new class variable for each sprite in system/sprites\n    _.each Sprites, (val, name) =>\n      if name isnt 'blankSprite'\n        @[name] = val(@loader)\n\n    @stage.removeChild @loadingText\n\n    #start game timer\n    createjs.Ticker.addEventListener \"tick\", @tick  unless createjs.Ticker.hasEventListener(\"tick\")\n\n    if @isSoundOn()\n      createjs.Sound.play 'music', createjs.Sound.INTERRUPT_NONE, 0, 0, true, 1\n\n  spawnMonsters: (diff)=>\n\n    num = if diff is 1 then 1200 else 800\n\n    # 1000 spawns around 600 bunnies\n    for i in [0..num] by 1\n\n      playerPos =\n        x: Math.random() * 9200\n        y: Math.random() * 9200\n\n      if @level.checkHitsAtPosition playerPos.x, playerPos.y\n        continue\n\n      color = Math.floor(Math.random() * 5)\n      switch color\n        when 0\n          monster = _.extend (new Monster(_.clone(@monsterSprite), _.clone(@monsterRedSprite), @)), (new createjs.Container())\n        when 1\n          monster = _.extend (new Monster(_.clone(@monster2Sprite), _.clone(@monsterRed2Sprite), @)), (new createjs.Container())\n        when 2\n          monster = _.extend (new Monster(_.clone(@monster3Sprite), _.clone(@monsterRed3Sprite), @)), (new createjs.Container())\n        when 3\n          monster = _.extend (new Monster(_.clone(@monster4Sprite), _.clone(@monsterRed4Sprite), @)), (new createjs.Container())\n        when 4\n          monster = _.extend (new Monster(_.clone(@monster5Sprite), _.clone(@monsterRed5Sprite), @)), (new createjs.Container())\n\n      monster.init(playerPos,@bloodSprite)\n      @stage.addChild monster\n      @monsters.push monster\n\n  toggleSound: =>\n    if @soundOn\n      createjs.Sound.stop 'music', createjs.Sound.INTERRUPT_NONE, 0, 0, true, 1\n      @soundOn = false\n    else\n      createjs.Sound.play 'music', createjs.Sound.INTERRUPT_NONE, 0, 0, true, 1\n      @soundOn = true\n\n  isSoundOn: =>\n    @soundOn\n\n  #reset all game logic\n  restart: =>\n\n    if @isSoundOn()\n      createjs.Sound.stop 'music', createjs.Sound.INTERRUPT_NONE, 0, 0, true, 1\n      createjs.Sound.play 'music', createjs.Sound.INTERRUPT_NONE, 0, 0, true, 1\n\n\n    Collections.reset()\n    #hide anything on stage\n    @stage.removeAllChildren()\n    Inventory.items = []\n    #ensure stage is blank and add the ship\n    @stage.clear()\n    @stage.x = -(9600 - @stage.canvas.width)\n    @stage.y = -(9600 - @stage.canvas.height)\n\n    @npcs = []\n    @monsters = []\n\n    if not @player\n      #create the player\n      @player = _.extend (new Player @), (new createjs.Container())\n      @player.init()\n      window.p = @player\n\n\n    playerPos =\n      x: 8400\n      y: 9300\n\n    @player.restart(playerPos)\n\n    @level = new Level @\n\n    @keyInput.reset()\n\n    #@stage.on 'click', @player.goto\n\n    @spawnMonsters(@difficulty)\n    for npcData in _npcs\n\n      # if no sprite specified, just use the generic player.\n      # if the sprite is blank, make a blank sprite based on size\n      # else actually create the sprite they want\n\n      if not npcData.sprite?\n        sprite = _.clone @playerSprite\n      else if npcData.sprite is 'blank'\n        sprite = _.clone Sprites.blankSprite(@loader, npcData.size.x, npcData.size.y)\n      else\n        sprite = _.clone(@[npcData.sprite])\n\n      npc = _.extend (new NPC @, sprite), (new createjs.Container())\n\n      npc.init(npcData)\n\n      @stage.addChild npc\n      @npcs.push npc\n\n    @stage.addChild @player\n\n    @healthBar = new createjs.Shape()\n    @healthBar.graphics.beginStroke(\"#000\")\n    @healthBar.graphics.beginFill(\"rgb(0,255,0)\")\n    @healthBar.graphics.setStrokeStyle(2)\n    @healthBar.snapToPixel = true\n    @healthBar.graphics.drawRect(@player.x-70, @player.y-65, 150*(@player.health / @player.healthMax), 15)\n    @healthBar.visible = true\n    @stage.addChild @healthBar\n\n\n    switch @difficulty\n      when 1\n        @player.health = 10\n        @player.healthMax = 10\n        for monster in @monsters\n          monster.life = 5\n          monster.MAX_VELOCITY = 8\n        @player.knockback = false\n\n\n\n      when 666\n        @player.health = 1\n        @player.healthMax = 1\n        for monster in @monsters\n          monster.life = 5\n          monster.MAX_VELOCITY = 5\n        @player.knockback = false\n\n\n      else\n        @player.health = 15\n        @player.healthMax = 15\n        for monster in @monsters\n          monster.life = 2\n          monster.MAX_VELOCITY = 5\n        @player.knockback = true\n\n  itemClick: (item, data, ev) =>\n    @itemsInteractedWith.push item\n    @objectClick ev\n\n  characterClick: (char, data, ev) =>\n    @charsInteractedWith.push char\n    @objectClick ev\n\n  monsterClick: (monster, data, ev) =>\n    @monstersInteractedWith.push monster\n    @objectClick ev\n\n  objectClick: (ev) =>\n    @player.gotoPos = null\n    ev.stopPropagation()\n\n  tick: (event) =>\n\n    if @WIN\n      if not @win.visible\n        @win.show()\n\n      @win.tick event\n\n      return\n\n    if @HOME\n      if not @home.visible\n        @home.show()\n\n      @stage.x = 0\n      @stage.y = 0\n\n      @home.tick event\n\n      return\n\n    if @INSTR\n      if not @instructions.visible\n        @instructions.show()\n\n      @stage.x = 0\n      @stage.y = 0\n\n      @instructions.tick event\n\n      return\n\n    if @INTRO\n      if not @intro.visible\n        @intro.show()\n\n      @stage.x = 0\n      @stage.y = 0\n\n      @intro.tick event\n      if @keyInput.escHeld\n        @restart()\n        @INTRO = false\n\n      return\n\n    # Game over. Clear the stage and show the message set in @GAME_OVER\n    if @GAME_OVER\n\n      if @keyInput.escHeld\n        @stage.removeAllChildren()\n        @showHome()\n\n      if @GAME_OVER and @GAME_OVER isnt 'fin'\n        @stage.update()\n\n        @stage.x = 0\n        @stage.y = 0\n\n        text = new createjs.Text(@GAME_OVER, \"26px Arial\", \"white\")\n\n        ctx = @stage.canvas.getContext('2d')\n        ctx.font = \"26px Arial\"\n\n        x = @stage.canvas.width/2 - ctx.measureText(@GAME_OVER).width/2\n\n        text.x = x\n        text.y = @stage.canvas.height/2 - 100\n        text.snapToPixel = true\n        text.textBaseline = \"alphabetic\"\n\n        esc = new createjs.Text(\"(esc to go back)\", \"14px Arial\", \"white\")\n        esc.x = x\n        esc.y = @stage.canvas.height/2\n        esc.snapToPixel = true\n        esc.textBaseline = \"alphabetic\"\n\n\n        @stage.addChild text\n        @stage.addChild esc\n        @stage.update()\n        # Don't want to re-add things to the stage\n        @GAME_OVER = \"fin\"\n      return\n\n    keys = []\n\n    return unless @player?\n\n    if @currentQuest?.isComplete\n      @currentQuest = null\n      @stage.removeChild @questArrow\n      @questArrow = null\n\n    if (item = (@itemsInteractedWith.splice 0, 1)[0])? and @player.checkDistance(item, 200)\n      Inventory.items.push item.id\n      @inventory.refresh()\n      @stage.removeChild item\n      item.visible = false\n\n    if (char = (@charsInteractedWith.splice 0, 1)[0])? and @player.checkDistance(char, 300)\n      if (dialog = char.getDialog())?\n        @startDialog dialog\n\n    if (monster = (@monstersInteractedWith.splice 0, 1)[0])? and @player.checkDistance(monster, 300)\n      @player.damageBunny monster\n\n    if @keyInput.bHeld and _.contains Inventory.items, 666\n      @showWin()\n\n    # If the user is 'doing something' dont let them do anything else..\n    if not @IN_DIALOG and not @IN_INVENTORY\n      #handle thrust\n      keys.push \"up\"  if @keyInput.fwdHeld\n      keys.push \"down\"  if @keyInput.dnHeld\n      keys.push \"left\"  if @keyInput.lfHeld\n      keys.push \"right\"  if @keyInput.rtHeld\n\n      moving = @player.accelerate keys\n\n      if moving\n        @level.checkDiv()\n\n      if @keyInput.spaceHeld\n        @keyInput.spaceHeld = false\n        @player.punch()\n\n\n      if @keyInput.iHeld\n        @player.accelerate []\n        @IN_INVENTORY = true\n        @keyInput.iHeld = false\n        @inventory.showInventory()\n\n      if @keyInput.actionHeld\n        @player.accelerate []\n        if not @player.checkNPCActions @npcs\n          if (item = @player.checkItemAcions @level.items)?\n            Inventory.items.push item.id\n            @inventory.refresh()\n            @stage.removeChild item\n            item.visible = false\n\n        @keyInput.actionHeld = false\n\n    else if not @IN_INVENTORY\n      if @keyInput.lfHeld\n        @dialogManager.keyPress \"left\"\n        @keyInput.lfHeld = false\n\n      else if @keyInput.rtHeld\n        @dialogManager.keyPress \"right\"\n        @keyInput.rtHeld = false\n\n      if @keyInput.enterHeld\n        @dialogManager.keyPress \"enter\"\n        @keyInput.enterHeld = false\n\n      else if @keyInput.escHeld\n        @keyInput.escHeld = false\n        @dialogManager.keyPress \"esc\"\n\n    else\n      if @keyInput.escHeld or @keyInput.iHeld\n        @keyInput.iHeld = false\n        @inventory.keyPress \"esc\"\n      else if @keyInput.lfHeld\n        @keyInput.lfHeld = false\n        @inventory.keyPress \"left\"\n      else if @keyInput.rtHeld\n        @keyInput.rtHeld = false\n        @inventory.keyPress \"right\"\n\n    # Displaying the map should be done independently of everything else, as it is just a hold-to-show thing.\n    # You want to be able to see the map while moving\n    if @keyInput.mHeld and not @MAP_OPEN\n      # Open a closed map\n      @MAP_OPEN = true\n      @map.update @stage, @player.x, @player.y, false\n\n    else if @MAP_OPEN and not @keyInput.mHeld\n      # Close an open map\n      @MAP_OPEN = false\n      @map.close()\n\n    else if @MAP_OPEN and @keyInput.mHeld and moving\n      # Show a transparent map while moving (close old map first)\n      @map.close()\n      @map.update @stage, @player.x, @player.y, true\n\n    @healthBar.graphics.clear()\n    @healthBar.graphics.beginStroke(\"#000\")\n    @healthBar.graphics.beginFill(\"rgb(\"+(255 - Math.floor(((@player.health / @player.healthMax)*255))) + \",\"+Math.floor(((@player.health / @player.healthMax)*255))+\",0)\")\n    @healthBar.graphics.setStrokeStyle(2)\n    @healthBar.snapToPixel = true\n    @healthBar.graphics.drawRect(@player.x + (150 - (150*(@player.health / @player.healthMax))) / 2 , @player.y, 150*(@player.health / @player.healthMax), 15)\n\n    #call sub ticks\n    @player.tick event, @level\n\n    npc.tick(event, @level) for npc in @npcs\n\n    for i in [0..@monsters.length-1] by 1\n      @monsters[i].tick()\n\n    @stage.x = -@player.x + @canvas.width * .5  if @player.x > @canvas.width * .5\n    @stage.y = -@player.y + @canvas.height * .5  if @player.y > @canvas.height * .5\n\n    @stage.update event, @level\n\n    # Whenever the callstack is clear, re-calculate arrow position\n    _.defer(\n      (quest) =>\n\n        return unless quest?\n        return unless (partNPC = quest.markers[quest.state])?\n        return unless (npc = _.find @npcs, (npc) => npc.id is partNPC.npc)?\n\n        v =\n          x: (npc.x + npc.width/2) - (@player.x + @player.width/2)\n          y: (npc.y + npc.height/2) - (@player.y + @player.height/2)\n\n        len = Math.sqrt(v.x*v.x + v.y*v.y)\n\n        if len > 200\n          v.x /= len\n          v.y /= len\n\n          v.x *= 200\n          v.y *= 200\n\n        angle = Math.atan2(v.y, v.x) * 180 / Math.PI\n\n        v.x += (@player.x + @player.width/2)\n        v.y += (@player.y + @player.height/2)\n\n        if @questArrow\n          @stage.removeChild @questArrow\n\n        @questArrow = _.clone(@arrowSprite)\n        @questArrow.snapToPixel = true\n        @questArrow.x = v.x\n        @questArrow.y = v.y\n        @questArrow.rotation = angle\n        @stage.addChild @questArrow\n\n      @currentQuest\n    )\n\n  # Open a dialog\n  startDialog: (dialog) =>\n    @IN_DIALOG = true\n    @dialogManager.showDialog dialog\n\n  endAction: () =>\n    @player.gotoPos = null\n    @IN_DIALOG = false\n\n  endInventory: () =>\n    @IN_INVENTORY = false\n\n  gameover: (msg) =>\n    @GAME_OVER = msg\n\n  startGame: (diff) =>\n    @clearModes()\n    @stage.removeAllChildren()\n    @difficulty = diff or 0\n    @INTRO = true\n\n  showHome: =>\n    @clearModes()\n    @stage.removeAllChildren()\n\n    @HOME = true\n\n  showInstructions: =>\n    @clearModes()\n    @stage.removeAllChildren()\n\n    @INSTR = true\n\n  showWin: =>\n    @clearModes()\n    @stage.removeAllChildren()\n\n    @WIN = true\n","module.exports = class Home\n\n  constructor: (@delegate) ->\n    {\n      @stage\n      @startGame\n      @keyInput\n      @toggleSound\n      @showInstructions\n    } = @delegate\n\n    @components = []\n    @controls = []\n    @visible = false\n    @selectedOption = 0\n    @img = document.createElement('img')\n    @img.src = '/images/rw.png';\n\n  show: =>\n    @selectedOption = 0\n    @visible = true\n    @addHeader()\n    @addStart()\n    @addStartHard()\n    @addStartImp()\n    @addInstructions()\n    @addSound()\n\n  addHeader: =>\n\n\n    scale = 800 / @img.width\n\n    header = new createjs.Bitmap(@img)\n    header.scaleX = scale\n    header.scaleY = 400 / @img.height\n    header.x = @stage.canvas.width/2 - 400\n    header.y = 0\n    @stage.addChild header\n    @components.push header\n\n  addStart: =>\n    t = \"Play!\"\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"36px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(t).width/2\n\n    text = new createjs.Text(t, \"36px Arial\", \"white\")\n    text.x = x\n    text.y = 400\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    text.onSelect = () =>\n      @startGame(0)\n      @close()\n\n    @stage.addChild text\n    @components.push text\n    @controls.push text\n\n    @stage.update()\n\n  addStartHard: =>\n    t = \"Play on Hard Mode\"\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"36px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(t).width/2\n\n    text = new createjs.Text(t, \"36px Arial\", \"white\")\n    text.x = x\n    text.y = 450\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    text.onSelect = () =>\n      @startGame(1)\n      @close()\n\n    @stage.addChild text\n    @components.push text\n    @controls.push text\n\n    @stage.update()\n\n  addStartImp: =>\n    t = \"Play on Impossible Mode (Good luck)\"\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"36px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(t).width/2\n\n    text = new createjs.Text(t, \"36px Arial\", \"white\")\n    text.x = x\n    text.y = 500\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    text.onSelect = () =>\n      @startGame(666)\n      @close()\n\n    @stage.addChild text\n    @components.push text\n    @controls.push text\n\n    @stage.update()\n\n  addInstructions: =>\n    t = \"Instructions\"\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"36px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(t).width/2\n\n    text = new createjs.Text(t, \"36px Arial\", \"white\")\n    text.x = x\n    text.y = 550\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    text.onSelect = () =>\n      @showInstructions()\n      @close()\n\n    @stage.addChild text\n    @components.push text\n    @controls.push text\n\n    @stage.update()\n\n  addSound: =>\n    t = \"Toggle Sound\"\n    ctx = @stage.canvas.getContext('2d')\n    ctx.font = \"36px Arial\"\n\n    x = @stage.canvas.width/2 - ctx.measureText(t).width/2\n\n    text = new createjs.Text(t, \"36px Arial\", \"white\")\n    text.x = x\n    text.y = 600\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    text.onSelect = () =>\n      @toggleSound()\n\n    @stage.addChild text\n    @components.push text\n    @controls.push text\n\n    @stage.update()\n\n  close: =>\n    @visible = false\n    @stage.removeChild(comp) for comp in @components\n    @components = []\n    @controls = []\n\n  tick: (event) =>\n    return unless @visible\n    if @keyInput.enterHeld\n      @controls[@selectedOption]?.onSelect()\n      @keyInput.enterHeld = false\n    else if @keyInput.dnHeld\n      if @selectedOption < @controls.length - 1\n        @controls[@selectedOption].color = \"white\"\n        @selectedOption++\n      @keyInput.dnHeld = false\n\n    else if @keyInput.fwdHeld\n      if @selectedOption > 0\n        @controls[@selectedOption].color = \"white\"\n        @selectedOption--\n      @keyInput.fwdHeld = false\n\n    @controls[@selectedOption]?.color = \"rgb(175,0,0)\"\n\n    @stage.update()\n","module.exports = class KeyInput\n  constructor: () ->\n    # KeyDown/Up defines\n    @KEYCODE_UP = 38\n    @KEYCODE_LEFT = 37\n    @KEYCODE_RIGHT = 39\n    @KEYCODE_DOWN = 40\n    @KEYCODE_W = 87\n    @KEYCODE_A = 65\n    @KEYCODE_S = 83\n    @KEYCODE_D = 68\n    @KEYCODE_B = 66\n    @KEYCODE_SPACE = 32\n    @ACTION = 69\n    @ENTER = 13\n    @KEYCODE_ESCAPE = 27\n    @KEYCODE_I = 73\n    @KEYCODE_M = 77\n\n    @lfHeld = false\n    @rtHeld = false\n    @fwdHeld = false\n    @dnHeld = false\n    @spaceHeld = false\n    @escHeld = false\n    @iHeld = false\n    @mHeld = false\n    @bHeld = false\n\n    @spaceIsReady = false\n\n    # E key. Talk to people, interact etc\n    @actionheld = false\n\n    window.setTimeout(\n      () =>\n        document.onkeydown = @handleKeyDown\n        document.onkeyup = @handleKeyUp\n        document.onkeypress = @handleKeyPress\n      1000\n    )\n  #allow for WASD and arrow control scheme\n  handleKeyDown: (e) =>\n    #cross browser issues exist\n    e = window.event unless e\n    switch e.keyCode\n      when @KEYCODE_A, @KEYCODE_LEFT\n        @lfHeld = true\n        false\n      when @KEYCODE_D, @KEYCODE_RIGHT\n        @rtHeld = true\n        false\n      when @KEYCODE_W, @KEYCODE_UP\n        @fwdHeld = true\n        false\n      when @KEYCODE_S, @KEYCODE_DOWN\n        @dnHeld = true\n        false\n      when @KEYCODE_SPACE\n        if @spaceIsReady\n          @spaceIsReady = false\n          @spaceHeld = true\n        false\n      when @KEYCODE_ESCAPE\n        @escHeld = true\n        false\n      when @KEYCODE_I\n        @iHeld = true\n        false\n      when @KEYCODE_M\n        @mHeld = true\n        false\n      when @KEYCODE_B\n        @bHeld = true\n        false\n      when @ACTION\n        @actionHeld = true\n      when @ENTER\n        @enterHeld = true\n\n  handleKeyUp: (e) =>\n    e = window.event  unless e\n    switch e.keyCode\n      when @KEYCODE_A, @KEYCODE_LEFT\n        @lfHeld = false\n      when @KEYCODE_D, @KEYCODE_RIGHT\n        @rtHeld = false\n      when @KEYCODE_W, @KEYCODE_UP\n        @fwdHeld = false\n      when @KEYCODE_S, @KEYCODE_DOWN\n        @dnHeld = false\n      when @KEYCODE_SPACE\n         @spaceHeld = false\n         @spaceIsReady = true\n      when@KEYCODE_ESCAPE\n        @escHeld = false\n      when @KEYCODE_I\n        @iHeld = false\n      when @KEYCODE_M\n        @mHeld = false\n      when @KEYCODE_B\n        @bHeld = false\n      when @ACTION\n        @actionHeld = false\n      when @ENTER\n        @enterHeld = false\n\n  reset: () =>\n    @lfHeld = @rtHeld = @fwdHeld = @dnHeld = @enterHeld = @actionHeld = false\n","module.exports = class Instructions\n\n  constructor: (@delegate) ->\n    {\n      @stage\n      @startGame\n      @keyInput\n      @showHome\n    } = @delegate\n\n    @components = []\n    @visible = false\n\n  show: =>\n    @visible = true\n    @addInstructions()\n\n  addInstructions: =>\n    x = 200\n    move = new createjs.Text(\"wasd/arrows - move\", \"20px Arial\", \"white\")\n    move.x = x\n    move.y = 100\n    move.snapToPixel = true\n    move.textBaseline = \"alphabetic\"\n\n    attk = new createjs.Text(\"space/left click - attack\", \"20px Arial\", \"white\")\n    attk.x = x\n    attk.y = 150\n    attk.snapToPixel = true\n    attk.textBaseline = \"alphabetic\"\n\n    inv = new createjs.Text(\"I - inventory\", \"20px Arial\", \"white\")\n    inv.x = x\n    inv.y = 200\n    inv.snapToPixel = true\n    inv.textBaseline = \"alphabetic\"\n\n    map = new createjs.Text(\"M (hold) - show map\", \"20px Arial\", \"white\")\n    map.x = x\n    map.y = 250\n    map.snapToPixel = true\n    map.textBaseline = \"alphabetic\"\n\n    act = new createjs.Text(\"E - Interact with NPC\", \"20px Arial\", \"white\")\n    act.x = x\n    act.y = 300\n    act.snapToPixel = true\n    act.textBaseline = \"alphabetic\"\n\n    clk = new createjs.Text(\"Left Click - Pick things up, attack, talk\", \"20px Arial\", \"white\")\n    clk.x = x\n    clk.y = 350\n    clk.snapToPixel = true\n    clk.textBaseline = \"alphabetic\"\n\n\n    esc = new createjs.Text(\"(esc to go back)\", \"14px Arial\", \"white\")\n    esc.x = x\n    esc.y = 420\n    esc.snapToPixel = true\n    esc.textBaseline = \"alphabetic\"\n\n    @stage.addChild move\n    @stage.addChild attk\n    @stage.addChild inv\n    @stage.addChild map\n    @stage.addChild act\n    @stage.addChild clk\n    @stage.addChild esc\n\n    @components.push move\n    @components.push attk\n    @components.push inv\n    @components.push map\n    @components.push act\n    @components.push clk\n    @components.push esc\n\n    @stage.update()\n\n  close: =>\n    @visible = false\n    @stage.removeChild(comp) for comp in @components\n\n  tick: (event) =>\n\n    if @keyInput.escHeld\n      @showHome()\n      @close()\n\n    @stage.update()\n","{wrap} = require 'coffee/utils'\nmodule.exports = class Intro\n\n  constructor: (@delegate) ->\n    {\n      @stage\n    } = @delegate\n\n    @pos = @stage.canvas.height\n    @lines = []\n    @story = \"\nIt is the year 2064. Rabbits have been reintroduced to the UVic campus to satisfy the student bodys collective nostalgia for an imagined pastoral past. \\n\n But the UVic administration has learned from their past mistakes, and stipulated one crucial difference this time around \\n\n Each rabbit has been equipped with augmented reality contact lenses and neural implants that allow the university to have complete control over their activities and keep an eye on all areas of the campus. \\n\n This means the population can be kept in check, and messages can be relayed to and from campus visitors through the rabbits. \\n However, not everyone thinks this is a good idea \\n \\n\n\nMission brief: \\n\n Environmental terrorist Dr. Antagonist has enclosed himself and UVics entire campus in an EMP forcefield. All electronics are rendered useless upon entry. \\n\n Once he manages to hack into the worlds satellites, he plans on expanding the forcefield to encompass the entire world, destroying all technology in its wake. \\n\n Your assignment is to infiltrate the campus and stop Dr. Antagonist before he can finish what he started. \\n\n Theres just one small problem: The doctor has commandeered UVics Rabbit Control Room, allowing him to mobilize the normally peaceful rabbits into a furry army. \\n\n Your mission starts now. Hop On! \\n\n (press the esc key)\n      \"\n\n    @visible = false\n\n  show: =>\n    @splitLines = wrap(@stage.canvas.getContext('2d'), @story, @stage.canvas.width / 2, \"40px Arial\")\n\n    @container = new createjs.Container()\n    i = 0\n    j = 0\n\n    for line in @splitLines\n      @text = new createjs.Text line.trim(), \"40px Arial\", \"white\"\n      @text.x = @stage.canvas.width / 4\n      @text.y = i*40 + j*20\n\n      @text.snapToPixel = true\n      @text.textBaseline = \"alphabetic\"\n\n      @container.addChild @text\n      i++\n\n      if line.indexOf('\\n') > -1\n        j++\n\n    @container.x = 0\n    @container.y = @stage.canvas.height\n\n    @stage.addChild @container\n    @visible = true\n\n  close: =>\n    @stage.removeChile(line) for line in @lines\n    @visible = false\n\n  tick: (event) =>\n\n    @stage.removeChild @container\n\n    @container.y = @pos\n\n    @stage.addChild @container\n\n    @pos-=2\n    @stage.update()\n","{ wrap } = require 'coffee/utils'\n# Dialog class for dialogs. For right now just a yes/no box. We could make a 'done' box too\n# WORK IN PROGRESS. We need to figure out a better way. use containers\n\nmodule.exports = class Inventory\n  @items = []\n  @hasSword: -> _.contains Inventory.items, 300\n\n  constructor: (@delegate) ->\n    {\n      @canvas\n      @stage\n      @endInventory\n    } = @delegate\n\n    @w = 428\n    @h = 208\n    @shownItems = []\n    @lines = []\n    @selected = 0\n    @open = false\n\n  # Draw the box that holds the dialog\n  createBox: =>\n    @box = new createjs.Shape()\n    @box.graphics.beginStroke(\"#000\")\n    @box.graphics.beginFill(\"papayawhip\")\n    @box.graphics.setStrokeStyle(2)\n    @box.snapToPixel = true\n    @box.graphics.drawRect(@pos.x, @pos.y, @w, @h)\n    @stage.addChild @box\n\n\n  createText: =>\n    return if @shownItems.length is 0\n    # Add the name\n    @stage.removeChild @name\n    @name = new createjs.Text(@shownItems[@selected].data.name, \"24px Arial\", \"black\")\n    @name.x = @pos.x + 10\n    @name.y = @pos.y + 90\n    @name.color = \"black\"\n    @name.textBaseline = \"alphabetic\"\n    @stage.addChild @name\n\n    # Add the description. Use wrap to create lines\n    @stage.removeChild(line) for line in @lines\n    @lines = []\n\n    lines = wrap(@canvas.getContext('2d'), @shownItems[@selected].data.description, @w - 20, \"20px Arial\")\n    i = 0\n\n    for line in lines\n      text = new createjs.Text(line, \"20px Arial\", \"black\")\n      text.x = @pos.x + 10\n      text.y = @pos.y + i * 30 + 140\n      text.color = \"#333\"\n      text.textBaseline = \"alphabetic\"\n      @stage.addChild text\n      @lines.push text\n\n      i++\n\n  refresh: =>\n    if @open\n      @close()\n      @showInventory()\n\n  showInventory: =>\n\n    @selected = 0 if @selected >= Inventory.items.length \n\n    # Position relative to the viewport\n    @pos =\n      x: @stage.x*-1 + 30\n      y: @stage.y*-1 + 30\n\n    @createBox()\n\n    for i in [0..Inventory.items.length - 1] by 1\n      item = Inventory.items[i]\n      @shownItems.push new Item(@pos, @stage, item, i, @delegate)\n\n    @shownItems[@selected]?.changeColor('tomato')\n\n    @createText()\n    @open = true\n  close: =>\n    @stage.removeChild @box\n    @stage.removeChild @name\n    item.close() for item in @shownItems\n    @shownItems = []\n    @stage.removeChild(line) for line in @lines\n    @lines = []\n    @open = false\n\n  keyPress: (key) =>\n    switch key\n      when \"esc\"\n        @close()\n        @endInventory()\n      when \"left\"\n        if @selected > 0\n          @shownItems[@selected].changeColor 'black'\n          @selected--\n          @shownItems[@selected].changeColor 'tomato'\n          @createText()\n      when \"right\"\n        if @selected < @shownItems.length - 1\n          @shownItems[@selected].changeColor 'black'\n          @selected++\n          @shownItems[@selected].changeColor 'tomato'\n          @createText()\n\n  class Item\n    constructor: (pos, @stage, item, i, @delegate) ->\n\n      # w and h better be factors of inventory.w/h\n      @w = 50\n      @h = 50\n\n      Collections = require 'coffee/collections'\n      @data = Collections.findModel item\n\n      @pos =\n        x: pos.x + i*@w + 7\n        y: pos.y + 7\n\n      spriteName = if (t = @data.type) then \"#{t}Sprite\" else \"noitemSprite\"\n      sprite = _.clone(@delegate[spriteName] or @delegate.noitemSprite)\n      @box = sprite\n      @box.x = @pos.x\n      @box.y = @pos.y\n      @box.scaleX = @w/sprite.spriteSheet._frameHeight\n      @box.scaleY = @h/sprite.spriteSheet._frameWidth\n\n      @stage.addChild @box\n\n      @mask = new createjs.Shape()\n      @mask.graphics.beginStroke('black')\n      @mask.graphics.setStrokeStyle(2)\n      @mask.snapToPixel = true\n      @mask.graphics.drawRect(@pos.x, @pos.y, @w, @h)\n\n      @stage.addChild @mask\n\n    changeColor: (color) ->\n      @stage.removeChild @mask\n      @mask.graphics.beginStroke(color)\n      @mask.graphics.drawRect(@pos.x, @pos.y, @w, @h)\n      @stage.addChild @mask\n    close: ->\n      @stage.removeChild @box\n      @stage.removeChild @mask\n","Items = require 'coffee/data/items'\n\nmodule.exports = class Level\n  constructor: (@delegate) ->\n    {\n      @stage\n      @itemClick\n      @player\n    } = @delegate\n\n    @numDivs = 20\n    @divs = [] # 2d array\n\n    @currentDiv =\n      x: 0\n      y: 0\n\n    @onScreen = []\n    @items = []\n\n    @mapData\n    @tileset\n    @init()\n\n\n  checkDiv: () =>\n    perDiv = @layerSize*96 / @numDivs\n\n    x = @currentDiv.x = Math.floor(@stage.x*-1 / perDiv) % @numDivs\n    y = @currentDiv.y = Math.floor(@stage.y*-1 / perDiv) % @numDivs\n\n    # hide every container\n    ## This needs to change in the future\n    for i in [0...@numDivs]\n      for j in [0...@numDivs]\n        @divs[i][j].visible = false\n\n    # Show every container currently on the screen\n    for i in [0..Math.ceil(@stage.canvas.width/perDiv)]\n      for j in [0..Math.ceil(@stage.canvas.height/perDiv)]\n        if x + i < @numDivs and y + j < @numDivs\n          @divs[x + i][y + j].visible = true\n\n\n    # NEED TO REMOVE OLD DIV EVENTUALLY\n\n  checkHitsAtPosition: (x, y) =>\n    x = Math.floor(x/@mapData.tilesets[0].tilewidth)\n    y = Math.floor(y/@mapData.tilesets[0].tileheight)\n\n    for layer in @mapData.layers\n      if layer.data[x + y * layer.width] isnt 0 and layer.properties.hit is 'true'\n        return true\n\n    false\n\n  initLayers: () =>\n    @level = new createjs.Container()\n    w = @mapData.tilesets[0].tilewidth\n    h = @mapData.tilesets[0].tileheight\n    imageData =\n      images: [@tileset]\n      frames:\n        width: w\n        height: h\n\n    # create spritesheet\n    tilesetSheet = new createjs.SpriteSheet(imageData)\n\n    # loading each layer at a time\n    idx = 0\n\n    while idx < @mapData.layers.length\n      layerData = @mapData.layers[idx]\n      @initLayer layerData, tilesetSheet, @mapData.tilewidth, @mapData.tileheight if layerData.type is \"tilelayer\"\n      idx++\n\n    for i in [0...@numDivs]\n      for j in [0...@numDivs]\n        @stage.addChild @divs[i][j]\n\n    @checkDiv @player.x, @player.y\n\n\n  initLayer: (layerData, tilesetSheet, tilewidth, tileheight) =>\n    perDiv = layerData.height / @numDivs\n\n    @layerSize ?= layerData.height\n\n    y = 0\n\n    while y < layerData.height\n      x = 0\n\n      while x < layerData.width\n\n        # create a new Sprite for each cell\n        cellSprite = new createjs.Sprite(tilesetSheet)\n\n        idx = x + y * layerData.width\n\n        if (data = layerData.data[idx]) isnt 0\n\n          cellSprite.gotoAndStop data - 1\n\n          cellSprite.x = x * tilewidth\n          cellSprite.y = y * tileheight\n          cellSprite.num = layerData.name\n\n          cellSprite.height = 96\n          cellSprite.width = 96\n\n          cellSprite.diagonalHeight = Math.sqrt(cellSprite.height*cellSprite.height + cellSprite.width*cellSprite.width)\n\n          cellSprite.hit = if layerData.properties.hit is \"true\" then true else false\n          cellSprite.type = 'tile'\n          #@stage.addChild cellSprite\n\n          if data - 1 in @tilepropsKeys\n            cellSprite.on 'click', _.partial @itemClick, cellSprite, _\n            type = cellSprite.type = @tileprops[(data - 1).toString()].type\n            @items.push cellSprite\n\n            if (item = _.find Items, (i) -> i.type is type)?\n              cellSprite.id = item.id\n\n          @divs[Math.floor(x / perDiv) % @numDivs]  ?= []\n          @divs[Math.floor(x / perDiv) % @numDivs][Math.floor(y / perDiv) % @numDivs] ?= new createjs.Container()\n          @divs[Math.floor(x / perDiv) % @numDivs][Math.floor(y / perDiv) % @numDivs].addChild cellSprite\n\n        x++\n      y++\n\n  init: (sprite) =>\n    $.ajax\n      url: \"images/Level1.json\"\n      async: false\n      dataType: \"json\"\n      success: (response) =>\n        @tileprops =  response.tilesets[0].tileproperties\n        @tilepropsKeys = (parseInt(key) for key, value of @tileprops)\n        @mapData = response\n        @tileset = new Image()\n        @tileset.src = @mapData.tilesets[0].image\n        @tileset.onLoad = @initLayers()\n","# There are 3 parts to the map. The image, the border and the dot\n\nmodule.exports = class Map\n  constructor: (@stage, @img) ->\n\n  update: (stage, playerX, playerY, moving) =>\n\n    # Make transparent if moving\n    alpha = if moving then 0.5 else 1\n\n    # The image size is based on the canvas height (like always?)\n    size = Math.min stage.canvas.width - 150, stage.canvas.height - 150\n\n    pos =\n      x: stage.x*-1 + stage.canvas.width/2 - size/2\n      y: stage.y*-1 + 20\n\n    # Interpolate the player pos on the map to the dot pos\n    dotPos =\n      x: (playerX / 9600) * size + pos.x\n      y: (playerY / 9600) * size + pos.y\n\n\n    @mapBorder = new createjs.Shape()\n    @map = new createjs.Bitmap(@img)\n    @dot = new createjs.Shape()\n\n    @map.alpha = alpha\n    @mapBorder.alpha = alpha\n    @dot.alpha = alpha\n\n    @map.scaleX = size / @img.width\n    @map.scaleY = size / @img.height\n    @map.x = pos.x\n    @map.y = pos.y\n\n    @mapBorder.graphics.beginStroke('black')\n    @mapBorder.graphics.setStrokeStyle(15)\n    @mapBorder.graphics.drawRect(pos.x, pos.y, size, size)\n\n    @dot.graphics.beginFill(\"yellow\")\n    @dot.snapToPixel = true\n    @dot.graphics.drawCircle(dotPos.x, dotPos.y, 15, 15)\n\n    stage.addChild @mapBorder\n    stage.addChild @map\n    stage.addChild @dot\n\n  close: =>\n    @stage.removeChild @map\n    @stage.removeChild @dot\n    @stage.removeChild @mapBorder\n","Inventory = require 'coffee/inventory'\nMarker = require 'coffee/models/questpart'\n\nmodule.exports = class Quest\n  constructor: (data) ->\n    @name = data.name\n    @state = 0\n    @id = data.id\n    @markers = {}\n    for marker in data.markers\n      @markers[marker.pos] = new Marker(marker)\n    @ordered = data.ordered or true\n    @inProgress = false\n    @isComplete\n    @onComplete = data.onComplete\n\n  completePart: (part) =>\n    return unless @inProgress\n    part = @getPart part\n    passed = @checkPartStatus part\n\n    return false unless passed\n\n    part.done = true\n    @state = part.pos + 1\n\n    if (com = part.onComplete)?\n      if com.type is 'item'\n        Inventory.items.push com.id\n\n    if @checkComplete()\n\n      @complete()\n\n      @inProgress = false\n      @isComplete = true\n\n    true\n\n  checkComplete: =>\n    @inProgress and not (_.find @markers, (m) -> not m.done)?\n\n  start: =>\n    @inProgress = true\n\n  checkPartStatus: (part) =>\n    return false if not @inProgress\n\n    conditionPassed = true\n    if part.condition?\n      conditionPassed = @checkPartCondition part.condition\n\n    if not conditionPassed\n      return false\n    else if part.pos isnt @state\n      return false\n\n    true\n\n  isCurrentPart: (part) =>\n    @getPart(part)?.pos is @state\n\n  checkPartCondition: (cond) =>\n    switch cond.type\n      when 'inventory'\n        return (_.without cond.items, Inventory.items...).length is 0\n\n  getPart: (id) =>\n    _.find @markers, (m) => m.id is id\n\n  complete: () =>\n    return unless @onComplete?\n    switch @onComplete.type\n      when 'item'\n        Inventory.items.push @onComplete.id\n      when 'cb'\n        @[@onComplete.name]()\n\n  finishMain: () =>\n    Inventory.items = _.without Inventory.items, [351, 352, 353, 354]...\n    Inventory.items.push 666\n","module.exports = class Marker\n  constructor: (data) ->\n    @pos = data.pos\n    @id = data.id\n    @done = false\n    @npc = data.npc\n    @onComplete = data.onComplete\n    @condition = data.cond\n","Character = require 'coffee/character'\nNPC = require 'coffee/npc'\nLevel = require 'coffee/level'\n\nmodule.exports = class Monster extends Character\n  constructor: (sprite, @hitsprite, @delegate) ->\n    {\n      @stage\n      @monsterClick\n      @player\n      @isSoundOn\n    } = @delegate\n\n    @regsprite = _.clone(sprite)\n    super @regsprite\n    @tickCount = 0\n    @waitCount = 0\n    @dying = false\n    @MAX_VELOCITY = 5\n\n\n\n  init: (@pos,blood) =>\n    @bloodSprite = blood\n    super @pos\n    @facing = Math.floor(Math.random() * 4) #0 - up, 1 - down, 2 - left, 3 - right\n    switch @facing\n      when 0\n        if @playerBody.currentAnimation isnt \"up\"\n          @playerBody.gotoAndPlay \"up\"\n      when 1\n        if @playerBody.currentAnimation isnt \"down\"\n          @playerBody.gotoAndPlay \"down\"\n      when 2\n        if @playerBody.currentAnimation isnt \"left\"\n          @playerBody.gotoAndPlay \"left\"\n      when 3\n        if @playerBody.currentAnimation isnt \"right\"\n          @playerBody.gotoAndPlay \"right\"\n    @life = 2\n\n    @on 'click', _.partial @monsterClick, @, _\n    @diagonalHeight = Math.sqrt((@width/2)*(@width/2) + (@height/2)*(@height/2))\n  hit: (direction) =>\n    #do hit here\n\n  kill: () =>\n    killChild = () =>\n      @stage.removeChild this\n    setTimeout killChild, 4000\n    if @isSoundOn()\n      createjs.Sound.play \"splat\"\n\n    @playerBody.spriteSheet = _.clone(@bloodSprite)\n    @playerBody.gotoAndPlay \"left_idle\"\n\n  lineDistance: (point1, point2) =>\n    xs = 0\n    ys = 0\n\n    xs = point2.x - point1.x\n    xs = xs * xs\n\n    ys = point2.y - point1.y\n    ys = ys * ys\n\n    return Math.sqrt( xs + ys )\n\n\n  # are the center points of the player and bunny within 100 of eachother?\n  checkDamagePlayer: =>\n    v =\n      x: (@player.x + @player.width / 2) - (@x + @width / 2)\n      y: (@player.y + @player.height / 2) - (@y + @height / 2)\n\n    d = Math.sqrt(v.x*v.x + v.y*v.y)\n\n    if d < 125\n      @player.damage()\n\n  tick: (event, level) =>\n\n    # Ignore bunnies that are off screen\n    if not (-@stage.x - 200 <= @x <= -@stage.x + @stage.canvas.width + 200 and -@stage.y - 200 <= @y <= -@stage.y + @stage.canvas.height + 200)\n      @visible = false\n      return\n    else if not @visible\n      @visible = true\n\n    if @dying\n      @playerBody.spriteSheet = @bloodSprite\n      return false\n\n    @checkDamagePlayer()\n\n    @tickCount++\n\n    if @waitCount > 0\n      @waitCount -= 1\n      if @waitCount isnt 0\n        return;\n      else\n        switch @facing\n          when 0\n            @playerBody.gotoAndPlay \"up\"\n          when 1\n            @playerBody.gotoAndPlay \"down\"\n          when 2\n            @playerBody.gotoAndPlay \"left\"\n          when 3\n            @playerBody.gotoAndPlay \"right\"\n\n\n    if(@tickCount % Math.floor(Math.random() * 300) is 0)\n      @waitCount = 20\n      switch @facing\n        when 0\n          @playerBody.gotoAndPlay \"up_idle\"\n        when 1\n          @playerBody.gotoAndPlay \"down_idle\"\n        when 2\n          @playerBody.gotoAndPlay \"left_idle\"\n        when 3\n          @playerBody.gotoAndPlay \"right_idle\"\n\n    randomDirArr = []\n\n    if @player.x > @x\n      randomDirArr.push 3\n    else\n      randomDirArr.push 2\n\n    if @player.y > @y\n      randomDirArr.push 1\n    else\n      randomDirArr.push 0\n\n\n    if(@tickCount % Math.floor(Math.random() * 50) is 0)\n      if (@lineDistance {x:@player.x, y:@player.y}, {x:@x,y:@y}) > 2500\n        @facing = Math.floor(Math.random() * 4)\n      else\n        @facing = randomDirArr[Math.floor(Math.random()*randomDirArr.length)]\n\n      switch @facing\n        when 0\n          if @playerBody.currentAnimation? isnt \"up\"\n            @playerBody.gotoAndPlay \"up\"\n        when 1\n          if @playerBody.currentAnimation? isnt \"down\"\n            @playerBody.gotoAndPlay \"down\"\n        when 2\n          if @playerBody.currentAnimation? isnt \"left\"\n            @playerBody.gotoAndPlay \"left\"\n        when 3\n          if @playerBody.currentAnimation? isnt \"right\"\n            @playerBody.gotoAndPlay \"right\"\n\n\n    horizCollision = false\n    vertCollision = false\n\n\n\n    # Collision detection\n    for child in @stage.children\n\n      dir = @checkCollisions(child) or {}\n\n      if dir.whore\n        horizCollision = true\n      if dir.green\n        vertCollision = true\n\n    if not horizCollision\n      @x += @velocity().x\n    if not vertCollision\n      @y += @velocity().y\n\n  velocity: () =>\n    vel = {\n      x: 0\n      y: 0\n    }\n\n    switch @facing\n      when 0 then vel.y -= @MAX_VELOCITY\n      when 1 then vel.y += @MAX_VELOCITY\n      when 2 then vel.x -= @MAX_VELOCITY\n      when 3 then vel.x += @MAX_VELOCITY\n\n    vel\n\n  checkCollision: (child) =>\n    dir = {}\n    if child instanceof NPC or (child.type is 'tile' and (child.hit))\n\n      data =\n        top: child.y\n        left: child.x\n        right: child.x + child.width\n        bottom: child.y + child.height\n        width: child.width\n        height: child.height\n        diagonalHeight: child.diagonalHeight\n      dir = @collide data, @velocity()\n\n    return dir\n","Character = require 'coffee/character'\nCollections = require 'coffee/collections'\n\nmodule.exports = class NPC extends Character\n  constructor: (@delegate, sprite) ->\n    {\n      @stage\n      questionSprite\n      exclamationSprite\n      playerSprite\n      @characterClick\n    } = @delegate\n\n    @questionSprite = _.clone questionSprite\n    @exclamationSprite = _.clone exclamationSprite\n\n    super sprite\n    @hasQuestion = false\n    @hasExlaimation = false\n\n  init: (data) =>\n    super data.pos\n    @id = data.id\n    @dialogs = data.dialogs\n\n    @on 'click', _.partial @characterClick, @, _\n    @diagonalHeight = Math.sqrt((@width/2)*(@width/2) + (@height/2)*(@height/2))\n\n  # Figure out which dialog this person whould show.\n  getDialog: () =>\n    # Loop over all of their dialogs. For each one, check if it should be the one they display\n    for dialog in @dialogs\n      quest = Collections.findModel dialog.quest\n\n      if dialog.type is 'questpart'\n        if quest.isCurrentPart(dialog.part) and quest.inProgress\n          return dialog.dialog\n      else if dialog.type is 'questdone'\n        if quest.isComplete\n          return dialog.dialog\n      else if dialog.type is 'quest'\n        if quest.inProgress\n          return dialog.dialog\n      else if dialog.type is 'queststart'\n        if not quest.inProgress and not quest.isComplete\n          return dialog.dialog\n      else\n        return dialog.dialog\n\n  getQuestState: () =>\n    for dialog in @dialogs\n      quest = Collections.findModel dialog.quest\n\n      if dialog.type is 'questpart'\n        if quest.isCurrentPart(dialog.part) and quest.inProgress\n          return dialog.state\n      else if dialog.type is 'queststart'\n        if not quest.inProgress and not quest.isComplete\n          return dialog.state\n\n  tick: (event, level) =>\n    switch @getQuestState()\n      when 'hasquest'\n        if not @hasExclamation\n          @stage.addChild @exclamationSprite\n          @exclamationSprite.x = @x + @width/2 - 33.5\n          @exclamationSprite.y = @y - @height/2 - 80\n          @hasExclamation = true\n      when 'return'\n        if not @hasQuestion\n          @stage.addChild @questionSprite\n          @questionSprite.x = @x + @width/2 - 33.5\n          @questionSprite.y = @y - @height/2 - 80\n          @hasQuestion = true\n      else\n        if @hasQuestion\n          @stage.removeChild @questionSprite\n          @hasQuestion = false\n\n        if @hasExclamation\n          @stage.removeChild @exclamationSprite\n          @hasExclamation = false\n","NPC = require 'coffee/npc'\nMonster = require 'coffee/monster'\nCharacter = require 'coffee/character'\nLevel = require 'coffee/level'\nCollections = require 'coffee/collections'\nInventory = require 'coffee/inventory'\nmodule.exports = class Player extends Character\n\n  # Static inventory. Should be refactored at a later date\n  constructor: (@delegate) ->\n    {\n      @startDialog\n      playerSprite: sprite\n      @stage\n      @gameover\n      @isSoundOn\n    } = @delegate\n\n    super sprite\n\n    @MAX_VELOCITY = 20\n    @lastKey\n    @attack = false\n    @knockback = true\n  moveTo: (x, y) =>\n    @x = x\n    @y = y\n\n  goto: (ev) =>\n    x = -@stage.x + ev.stageX\n    y = -@stage.y + ev.stageY\n\n    @gotoPos =\n      x: x\n      y: y\n\n  restart: (pos) =>\n    @x = pos.x\n    @y = pos.y\n    @health = 15\n\n  init: () =>\n    super {x: 0, y: 0}\n    @vX = 0\n    @vY = 0\n    @facing = 3 #0 - up, 1 - down, 2 - left, 3 - right\n    @health = 15\n    @healthMax = 15\n    @recentlyHit = false\n    @diagonalHeight = Math.sqrt((@width/2)*(@width/2) + (@height/4)*(@height/4))\n\n    @playerBody.addEventListener 'animationend', (ev) =>\n      if ev.name.indexOf('attack') isnt -1\n        @attack = false\n\n    setInterval(\n      () =>\n        @restoreHealth()\n      10000\n    )\n\n  checkNPCActions: (npcs) =>\n    # We are going from the CENTERS of the characters\n    me =\n      x: @x + @width/2\n      y: @y + @height/2\n\n    for npc in npcs\n      them =\n        x: npc.x + npc.width/2\n        y: npc.y + npc.height/2\n\n      # Vector from me to them\n      v =\n        x: me.x - them.x\n        y: me.y - them.y\n\n      # Distance between centers\n      d = Math.sqrt(v.x*v.x + v.y*v.y)\n      if d < 250\n\n        if (dialog = npc.getDialog())\n          @startDialog npc.getDialog()\n          return true\n\n  checkItemAcions: (items) ->\n    for item in items\n      me =\n        x: @x + @width/2\n        y: @y + @height/2\n\n      for item in items\n        them =\n          x: item.x + item.width/2\n          y: item.y + item.height/2\n\n        # Vector from me to them\n        v =\n          x: me.x - them.x\n          y: me.y - them.y\n\n        # Distance between centers\n        d = Math.sqrt(v.x*v.x + v.y*v.y)\n        if d < 250\n          return item\n\n\n  restoreHealth: () =>\n    if @health < @healthMax\n      @health += 1\n\n  tick: (event, level) =>\n\n    horizCollision = false\n    vertCollision = false\n\n    # Collision detection\n    for child in @stage.children\n\n      dir = @checkCollisions(child) or {}\n\n      if dir.whore\n        horizCollision = true\n      if dir.green\n        vertCollision = true\n\n      if dir.whore and dir.green\n        break\n\n    if not horizCollision\n      @x += @vX\n    if not vertCollision\n      @y += @vY\n\n  # Damage a player...but only once every 1200ms\n  damage: () =>\n    return if @recentlyHit\n    @recentlyHit = true\n    @health -= 1\n\n    if @health <= 0\n      @gameover \"You aren't invincible, protagonist!\"\n    setTimeout(\n      () =>\n        @recentlyHit = false\n      1200\n    )\n\n  checkCollision: (child) =>\n    dir = {}\n    vel = {\n      x: @vX\n      y: @vY\n    }\n    if child instanceof NPC or (child instanceof Monster and child.dying is false) or (child.type is 'tile' and (child.hit))\n      data =\n        top: child.y\n        left: child.x\n        right: child.x + child.width\n        bottom: child.y + child.height\n        width: child.width\n        height: child.height\n        diagonalHeight: child.diagonalHeight\n      dir = @collide data, vel\n\n    return dir\n\n  punch: () =>\n\n    vel = {\n      x: @vX\n      y: @vY\n    }\n\n    # Collision detection\n    for child in @stage.children\n      do (child) =>\n        dir = {}\n        if child instanceof Monster\n          data =\n            top: child.y\n            left: child.x\n            right: child.x + child.width\n            bottom: child.y + child.height\n          # dir = @collide data, vel\n\n          if !child.dying\n\n            if child instanceof Monster\n              if (@lineDistance {x:child.x, y:child.y}, {x:@x,y:@y}) < 200 and child.life > 0\n                if child.x > @x and @facing is 3\n                  child.x += 80 if @knockback\n                  @damageBunny child\n                else if child.x < @x and @facing is 2\n                  child.x -= 80 if @knockback\n                  @damageBunny child\n                else if child.y < @y and @facing is 0\n                  child.y -= 80 if @knockback\n                  @damageBunny child\n                else if child.y > @y and @facing is 1\n                  child.y += 80 if @knockback\n                  @damageBunny child\n\n\n  # If the player is holding the E key, and the character is within 300px from an NPC,\n  # play that NPCs dialog\n\n  damageBunny: (child) =>\n    dmg = if (_.contains Inventory.items, 300) then 2 else 1\n\n\n    if @isSoundOn()\n      if (_.contains Inventory.items, 300)\n        createjs.Sound.play \"sword\"\n      else\n        createjs.Sound.play \"punch\"\n\n    child.life -= dmg\n\n    v =\n      x: child.x - @x\n      y: child.y - @y\n\n    @attack = if Math.abs(v.x) > Math.abs(v.y) and v.x > 0 then \"right_attack\"\n    else if Math.abs(v.x) > Math.abs(v.y) and v.x < 0  then \"left_attack\"\n    else if Math.abs(v.x) < Math.abs(v.y) and v.y < 0  then \"up_attack\"\n    else if Math.abs(v.x) < Math.abs(v.y) and v.y > 0  then \"down_attack\"\n\n    if Inventory.hasSword() then @attack += \"_sword\"\n\n    child.playerBody.spriteSheet = child.hitsprite.spriteSheet\n\n    revertSprite = () ->\n      child.playerBody.spriteSheet = child.regsprite.spriteSheet\n\n    setTimeout revertSprite, 100\n\n    if child.life <= 0\n      child.dying = true\n      child.kill()\n\n  checkDistance: (item, max) =>\n    me =\n      x: @x + @width/2\n      y: @y + @height/2\n\n    them =\n      x: item.x + item.width/2\n      y: item.y + item.height/2\n\n    # Vector from me to them\n    v =\n      x: me.x - them.x\n      y: me.y - them.y\n\n\n    # Distance between centers\n    d = Math.sqrt(v.x*v.x + v.y*v.y)\n    d < max # return true if d < 200 else false\n\n  # Am I facing in the right direction to interact?\n  isFacing: (them) =>\n    v =\n      x: @x - them.x\n      y: @y - them.y\n    angle = Math.abs(Math.atan(v.y/v.x) * 180 / Math.PI)\n    (@facing is 3 and v.x < 0  and (0 < angle < 60)) or\n      (@facing is 2 and v.x > 0 and (0 < angle < 60)) or\n      (@facing is 0 and v.y > 0 and (60 < angle < 120)) or\n      (@facing is 1 and v.y < 0 and (60 < angle < 120))\n\n  accelerate: (keys) =>\n\n    # If there are no mouse buttons held and no keys, player better not be mocing\n    if not keys.length and not @gotoPos\n      @latestKey = false\n      @vX = 0\n      @vY = 0\n\n    # A key is held\n    else if keys.length\n      @gotoPos = null # Clear the last clicked pos if a key is pressed. keys have higher precedence\n      @vX = 0\n      @vY = 0\n      latestKey = false\n\n      keys.forEach (key) =>\n        @vX += -@MAX_VELOCITY if key is \"left\"\n        @vX += @MAX_VELOCITY if key is \"right\"\n        @vY += -@MAX_VELOCITY if key is \"up\"\n        @vY += @MAX_VELOCITY if key is \"down\"\n        latestKey = key\n    # Mouse hold\n    else\n\n      # Vector from center of character to where we clicked\n      v =\n        x: @gotoPos.x - (@x + @width/2)\n        y: @gotoPos.y - (@y + @height/2)\n\n      # We hit our target!!! At least almost :)\n      if Math.abs(v.x) <= 10 and Math.abs(v.y) <= 10\n        @vX = 0\n        @vY = 0\n        @gotoPos = null\n\n      else\n\n        vl = Math.sqrt(v.x*v.x + v.y*v.y)\n\n        # Normalize the vector, and multiply each part by max velocity so the guy moves that direction\n        @vX =  (v.x / vl * @MAX_VELOCITY) | 0 # Bitwise shift by 0 bits is apparently faster than Math.floor - thanks @mattfik\n        @vY =  (v.y / vl * @MAX_VELOCITY) | 0\n\n        # Figure out which way we want the sprite to point based on which velocity has more pull\n        latestKey = if Math.abs(@vX) > Math.abs(@vY)\n          if @vX > 0 then 'right'\n          else 'left'\n        else\n          if @vY > 0 then 'down'\n          else 'up'\n\n    if @attack\n      if @playerBody.currentAnimation isnt @attack\n        @playerBody.gotoAndPlay @attack\n    else\n      switch latestKey\n        when \"left\"\n          @facing = 2\n          if @playerBody.currentAnimation isnt \"left\"\n            @playerBody.gotoAndPlay \"left\"\n            @lastKey = \"left\"\n        when \"right\"\n          @facing = 3\n          if @playerBody.currentAnimation isnt \"right\"\n            @playerBody.gotoAndPlay \"right\"\n            @lastKey = \"right\"\n        when \"up\"\n          @facing = 0\n          if @playerBody.currentAnimation isnt \"up\"\n            @playerBody.gotoAndPlay \"up\"\n            @lastKey = \"up\"\n        when \"down\"\n          @facing = 1\n          if @playerBody.currentAnimation isnt \"down\"\n            @playerBody.gotoAndPlay \"down\"\n            @lastKey = \"down\"\n        else\n          switch @lastKey\n            when \"left\"\n              @playerBody.gotoAndPlay \"left_idle\"\n            when \"up\"\n              @playerBody.gotoAndPlay \"up_idle\"\n            when \"down\"\n              @playerBody.gotoAndPlay \"down_idle\"\n            when \"right\"\n              @playerBody.gotoAndPlay \"right_idle\"\n    @vX = @MAX_VELOCITY  if @vX > @MAX_VELOCITY\n    @vX = -@MAX_VELOCITY  if @vX < -@MAX_VELOCITY\n    @vY = @MAX_VELOCITY  if @vY > @MAX_VELOCITY\n    @vY = -@MAX_VELOCITY  if @vY < -@MAX_VELOCITY\n\n    # Was the guy moving?\n    return if @vX or @vY then true else false\n\n  spinAttack: () =>\n    for child in @stage.children\n      if child instanceof Monster\n        d =\n          x: child.x - @x\n          y: child.y - @y\n\n        d = Math.sqrt(d.x*d.x + d.y*d.y)\n\n        if d < 400\n          @damageBunny child\n\n\n  lineDistance: (point1, point2) =>\n    xs = 0\n    ys = 0\n\n    xs = point2.x - point1.x\n    xs = xs * xs\n\n    ys = point2.y - point1.y\n    ys = ys * ys\n\n    return Math.sqrt( xs + ys )\n\n  toClearihue: =>\n    @x = 8000\n    @y = 7000\n\n  toStart: =>\n    @x = 9000\n    @y = 9000\n\n  toCornett: =>\n    @x = 8720\n    @y = 4500\n\n  toSSM: =>\n    @x = 8500\n    @y = 1800\n\n  toElliot: =>\n    @x = 1720\n    @y = 6060\n\n  toLib: =>\n    @x = 3120\n    @y = 8940\n\n  pos: (x, y)=>\n    if not (x? or y?)\n      \"x: #{@x}, y: #{@y}\"\n    else\n      @x = x\n      @y = y\n","playerSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"player2\")]\n    frames:\n      regX: 0\n      height: 179\n      count: 96\n      regY: 0\n      width: 134\n\n    animations:\n      up: [0, 2, \"up\"]\n      right: [12, 14, \"right\"]\n      down: [24, 26, \"down\"]\n      left: [36, 38, \"left\"]\n\n      left_attack_sword:\n        frames: [39, 55, 62, 62, 62]\n      right_attack_sword:\n        frames: [5, 16, 62, 62, 62]\n      up_attack_sword:\n        frames: [8, 18, 62, 62, 62]\n      down_attack_sword:\n        frames: [30, 41, 62, 62, 62]\n\n      left_attack:\n        frames: [87, 88, 89]\n      right_attack:\n        frames: [63, 64, 65]\n      up_attack:\n        frames: [51, 52, 53]\n      down_attack:\n        frames: [75, 76, 77]\n\n      left_idle: [37, 37]\n      right_idle: [13, 13]\n      up_idle: [1, 1]\n      down_idle: [25, 25]\n  )\n\n  playerSprite = new createjs.Sprite(data, \"right_idle\")\n  playerSprite.framerate = 10\n  playerSprite\n\nexclamationSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"exclamation\")]\n    frames:\n      regX: 0\n      height: 201\n      count: 9\n      regY: 0\n      width: 67\n\n    animations:\n      bounce: [0, 8, \"bounce\"]\n  )\n\n  exclamation = new createjs.Sprite(data, \"bounce\")\n  exclamation.framerate = 10\n  exclamation\n\nquestionSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"question\")]\n    frames:\n      regX: 0\n      height: 201\n      count: 9\n      regY: 0\n      width: 67\n\n    animations:\n      bounce: [0, 8, \"bounce\"]\n  )\n\n  question = new createjs.Sprite(data, \"bounce\")\n  question.framerate = 10\n  question\n\nmonsterSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSprite = new createjs.Sprite(data, \"right_idle\")\n  monsterSprite.framerate = 10\n  monsterSprite\n\nmonster2Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster2\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSprite2 = new createjs.Sprite(data, \"right_idle\")\n  monsterSprite2.framerate = 10\n  monsterSprite2\n\nmonster3Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster3\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSprite2 = new createjs.Sprite(data, \"right_idle\")\n  monsterSprite2.framerate = 10\n  monsterSprite2\n\nmonster4Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster4\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSprite2 = new createjs.Sprite(data, \"right_idle\")\n  monsterSprite2.framerate = 10\n  monsterSprite2\n\nmonster5Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster5\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSprite2 = new createjs.Sprite(data, \"right_idle\")\n  monsterSprite2.framerate = 10\n  monsterSprite2\n\nmonsterRedSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monsterred\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSpritered = new createjs.Sprite(data, \"right_idle\")\n  monsterSpritered.framerate = 10\n  monsterSpritered\n\nmonsterRed2Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster2red\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSpritered = new createjs.Sprite(data, \"right_idle\")\n  monsterSpritered.framerate = 10\n  monsterSpritered\n\nmonsterRed3Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster3red\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSpritered = new createjs.Sprite(data, \"right_idle\")\n  monsterSpritered.framerate = 10\n  monsterSpritered\n\nmonsterRed4Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster4red\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSpritered = new createjs.Sprite(data, \"right_idle\")\n  monsterSpritered.framerate = 10\n  monsterSpritered\n\nmonsterRed5Sprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"monster5red\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 12\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 2, \"down\"]\n      left: [3, 5, \"left\"]\n      right: [6, 8, \"right\"]\n      up: [9, 11, \"up\"]\n      left_idle: [4,4]\n      right_idle: [7,7]\n      up_idle: [9, 9]\n      down_idle: [0, 0]\n  )\n\n  monsterSpritered = new createjs.Sprite(data, \"right_idle\")\n  monsterSpritered.framerate = 10\n  monsterSpritered\n\nbloodSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"bloodPool\")]\n    frames:\n      regX: 0\n      height: 130\n      count: 1\n      regY: 0\n      width: 130\n\n    animations:\n      down: [0, 0, \"down\"]\n      left: [0, 0, \"left\"]\n      right: [0, 0, \"right\"]\n      up: [0, 0, \"up\"]\n      left_idle: [0, 0]\n      right_idle: [0, 0]\n      up_idle: [0, 0]\n      down_idle: [0, 0]\n  )\n\n  data\n\narrowSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"arrow\")]\n    frames:\n      regX: 0\n      height: 50\n      count: 1\n      regY: 0\n      width: 50\n\n    animations:\n      default: [0, 0]\n  )\n\n  arrowSprite = new createjs.Sprite(data, \"default\")\n  arrowSprite.framerate = 10\n  arrowSprite\n\nsignSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"sign\")]\n    frames:\n      regX: 0\n      height: 310\n      count: 1\n      regY: 0\n      width: 330\n\n    animations:\n      default: [0, 0]\n  )\n\n  signSprite = new createjs.Sprite(data, \"default\")\n  signSprite.framerate = 10\n  signSprite\n\nbarrelSprite = (loader) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"barrel\")]\n    frames:\n      regX: 0\n      height: 200\n      count: 1\n      regY: 0\n      width: 200\n\n    animations:\n      default: [0, 0]\n  )\n\n  barrelSprite = new createjs.Sprite(data, \"default\")\n  barrelSprite.framerate = 10\n  barrelSprite\n\nblankSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"blank\")]\n    frames:\n      regX: 0\n      height: 96*y\n      count: 1\n      regY: 0\n      width: 96*x\n\n    animations:\n      default: [0, 0]\n  )\n\n  blankSprite = new createjs.Sprite(data, \"default\")\n  blankSprite.framerate = 10\n  blankSprite\n\ntrapSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"trap\")]\n    frames:\n      regX: 0\n      height: 96\n      count: 1\n      regY: 0\n      width: 96\n\n    animations:\n      default: [0, 0]\n  )\n\n  trapSprite = new createjs.Sprite(data, \"default\")\n  trapSprite.framerate = 10\n  trapSprite\n\nnoitemSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"noitem\")]\n    frames:\n      regX: 0\n      height: 50\n      count: 1\n      regY: 0\n      width: 50\n\n    animations:\n      default: [0, 0]\n  )\n\n  noitemSprite = new createjs.Sprite(data, \"default\")\n  noitemSprite.framerate = 10\n  noitemSprite\n\namplifierSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"amplifier\")]\n    frames:\n      regX: 0\n      height: 96\n      count: 1\n      regY: 0\n      width: 96\n\n    animations:\n      default: [0, 0]\n  )\n\n  amplifierSprite = new createjs.Sprite(data, \"default\")\n  amplifierSprite.framerate = 10\n  amplifierSprite\n\ncarrotSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"carrot\")]\n    frames:\n      regX: 0\n      height: 50\n      count: 1\n      regY: 0\n      width: 50\n\n    animations:\n      default: [0, 0]\n  )\n\n  carrotSprite = new createjs.Sprite(data, \"default\")\n  carrotSprite.framerate = 10\n  carrotSprite\n\nremoteSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"remote\")]\n    frames:\n      regX: 0\n      height: 50\n      count: 1\n      regY: 0\n      width: 50\n\n    animations:\n      default: [0, 0]\n  )\n\n  remoteSprite = new createjs.Sprite(data, \"default\")\n  remoteSprite.framerate = 10\n  remoteSprite\n\nnoteSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"note\")]\n    frames:\n      regX: 0\n      height: 96\n      count: 1\n      regY: 0\n      width: 96\n\n    animations:\n      default: [0, 0]\n  )\n\n  noteSprite = new createjs.Sprite(data, \"default\")\n  noteSprite.framerate = 10\n  noteSprite\n\ndeactivatorSprite = (loader, x, y) ->\n  data = new createjs.SpriteSheet(\n    images: [loader.getResult(\"deactivator\")]\n    frames:\n      regX: 0\n      height: 96\n      count: 1\n      regY: 0\n      width: 96\n\n    animations:\n      default: [0, 0]\n  )\n\n  deactivatorSprite = new createjs.Sprite(data, \"default\")\n  deactivatorSprite.framerate = 10\n  deactivatorSprite\n\n\nmodule.exports =\n  playerSprite: playerSprite\n  exclamationSprite: exclamationSprite\n  questionSprite: questionSprite\n  monsterSprite: monsterSprite\n  monster2Sprite: monster2Sprite\n  monster3Sprite: monster3Sprite\n  monster4Sprite: monster4Sprite\n  monster5Sprite: monster5Sprite\n  monsterRedSprite: monsterRedSprite\n  monsterRed2Sprite: monsterRed2Sprite\n  monsterRed3Sprite: monsterRed3Sprite\n  monsterRed4Sprite: monsterRed4Sprite\n  monsterRed5Sprite: monsterRed5Sprite\n  bloodSprite: bloodSprite\n  arrowSprite: arrowSprite\n  signSprite: signSprite\n  barrelSprite: barrelSprite\n  blankSprite: blankSprite\n  trapSprite: trapSprite\n  noitemSprite: noitemSprite\n  amplifierSprite: amplifierSprite\n  carrotSprite: carrotSprite\n  remoteSprite: remoteSprite\n  noteSprite: noteSprite\n  deactivatorSprite: deactivatorSprite\n","module.exports =\n  wrap: (ctx,phrase,maxPxLength,textStyle) ->\n    wa = phrase.split(\" \")\n    phraseArray = []\n    lastPhrase = wa[0]\n    l = maxPxLength\n    measure = 0\n    ctx.font = textStyle\n\n    for i in [1..wa.length] by 1\n      w = wa[i]\n\n\n      if w is '\\n'\n        phraseArray.push lastPhrase\n        phraseArray.push '\\n'\n        lastPhrase = \"\"\n        continue\n\n      measure = ctx.measureText(lastPhrase+w).width\n\n      if measure < l\n        lastPhrase += (\" \"+w)\n      else\n        phraseArray.push lastPhrase\n        lastPhrase = w\n\n      if i is wa.length - 1\n        phraseArray.push lastPhrase\n        break\n\n    phraseArray\n","module.exports = class Win\n\n  constructor: (@delegate) ->\n    {\n      @stage\n      @keyInput\n      @showHome\n    } = @delegate\n\n    @visible = false\n    @components = []\n\n\n  addText: =>\n    @stage.x = 0\n    @stage.y = 0\n\n    text = new createjs.Text \"You deactivated all the bunnies! You Winner\", \"20px Arial\", \"yellow\"\n    text.x = 200\n    text.y = 400\n    text.snapToPixel = true\n    text.textBaseline = \"alphabetic\"\n\n    esc = new createjs.Text(\"(esc to go back)\", \"14px Arial\", \"white\")\n    esc.x = 200\n    esc.y = 300\n    esc.snapToPixel = true\n    esc.textBaseline = \"alphabetic\"\n\n    @stage.addChild text\n    @stage.addChild esc\n    @components.push text\n    @components.push esc\n    @stage.update()\n\n\n\n  show: =>\n    @visible = true\n    @addText()\n\n  close: =>\n    @visible = false\n    @stage.removeChild(comp) for comp in @components\n    @components = []\n\n  tick: (event) =>\n    if @keyInput.escHeld\n      @close()\n      @showHome()\n"]}